<%- include('../template/main/head', { titleWeb: 'Registro' , cssStyle: ['css/auth/register.css', 'css/main/navbar.css'] }) %>
<%- include('../template/main/navbar') %>

<div class="background-image"></div>
<div class="overlay"></div>

<div class="min-h-screen flex items-center justify-center px-4 mt-8 mb-8">
    <div class="w-full max-w-2xl bg-indigo-900 bg-opacity-95 p-8 rounded-3xl shadow-2xl border-2 border-indigo-700 animate-slideFadeIn relative">
        <!-- Mensajes de error o éxito -->
        <% if (error) { %>
            <div class="mb-4 flex items-center bg-red-900 bg-opacity-70 border border-red-700 text-red-300 px-4 py-3 rounded-lg text-sm animate-fadeIn" role="alert">
                <svg class="w-5 h-5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10c0 4.418-3.582 8-8 8s-8-3.582-8-8 3.582-8 8-8 8 3.582 8 8zm-9-3a1 1 0 112 0v4a1 1 0 11-2 0V7zm2 7a1 1 0 11-2 0 1 1 0 012 0z" clip-rule="evenodd" />
                </svg>
                <p><%= error %></p>
            </div>
        <% } %>
        <% if (success) { %>
            <div class="mb-4 flex items-center bg-green-900 bg-opacity-70 border border-green-700 text-green-300 px-4 py-3 rounded-lg text-sm animate-fadeIn" role="alert">
                <svg class="w-5 h-5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.707a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
                <p><%= success %></p>
            </div>
        <% } %>
        <!-- Stepper -->
        <div class="stepper-bar">
            <div class="flex flex-col items-center">
                <div id="step1-circle" class="stepper-step active">1</div>
                <div class="stepper-label">Datos</div>
            </div>
            <div class="stepper-connector"></div>
            <div class="flex flex-col items-center">
                <div id="step2-circle" class="stepper-step">2</div>
                <div class="stepper-label">Acceso</div>
            </div>
        </div>
        <h2 class="text-3xl font-extrabold text-center text-indigo-100 mb-6 tracking-tight drop-shadow flex items-center justify-center gap-3">
            <i class="bi bi-person-plus-fill text-cyan-400 text-2xl"></i>
            Crear una cuenta
        </h2>
        <form action="/auth/register" method="POST" class="space-y-4 text-base" id="registerStepperForm" autocomplete="off">
            <!-- Paso 1 -->
            <div id="step1">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="first_name" class="block text-indigo-200 font-semibold mb-1">Primer Nombre</label>
                        <input type="text" id="first_name" name="first_name" required
                            class="w-full px-4 py-2 rounded-lg border border-indigo-700 bg-indigo-800 text-white shadow-inner focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition input-animated" />
                    </div>
                    <div>
                        <label for="middle_name" class="block text-indigo-200 font-semibold mb-1">Segundo Nombre (opcional)</label>
                        <input type="text" id="middle_name" name="middle_name"
                            class="w-full px-4 py-2 rounded-lg border border-indigo-700 bg-indigo-800 text-white shadow-inner focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition input-animated" />
                    </div>
                    <div>
                        <label for="last_name" class="block text-indigo-200 font-semibold mb-1">Primer Apellido</label>
                        <input type="text" id="last_name" name="last_name" required
                            class="w-full px-4 py-2 rounded-lg border border-indigo-700 bg-indigo-800 text-white shadow-inner focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition input-animated" />
                    </div>
                    <div>
                        <label for="second_last_name" class="block text-indigo-200 font-semibold mb-1">Segundo Apellido (opcional)</label>
                        <input type="text" id="second_last_name" name="second_last_name"
                            class="w-full px-4 py-2 rounded-lg border border-indigo-700 bg-indigo-800 text-white shadow-inner focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition input-animated" />
                    </div>
                    <div>
                        <label for="document_type" class="block text-indigo-200 font-semibold mb-1">Tipo de Documento</label>
                        <select id="document_type" name="document_type" required
                            class="w-full px-4 py-2 rounded-lg border border-indigo-700 bg-indigo-800 text-white focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition input-animated">
                            <option value="" disabled selected>Selecciona...</option>
                            <option value="CC">CC</option>
                            <option value="TI">TI</option>
                            <option value="CE">CE</option>
                            <option value="NIT">NIT</option>
                            <option value="PAS">PAS</option>
                        </select>
                    </div>
                    <div>
                        <label for="document_number" class="block text-indigo-200 font-semibold mb-1">Número de Documento</label>
                        <input type="text" id="document_number" name="document_number" required
                            class="w-full px-4 py-2 rounded-lg border border-indigo-700 bg-indigo-800 text-white shadow-inner focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition input-animated" />
                    </div>
                    <div>
                        <label for="phone" class="block text-indigo-200 font-semibold mb-1">Número de Teléfono (opcional)</label>
                        <input type="tel" id="phone" name="phone"
                            class="w-full px-4 py-2 rounded-lg border border-indigo-700 bg-indigo-800 text-white shadow-inner focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition input-animated" />
                    </div>
                    <div>
                        <label for="birth_date" class="block text-indigo-200 font-semibold mb-1">Fecha de Nacimiento</label>
                        <input type="date" id="birth_date" name="birth_date" required
                            class="w-full px-4 py-2 rounded-lg border border-indigo-700 bg-indigo-800 text-white shadow-inner focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition input-animated" />
                    </div>
                </div>
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mt-6 gap-4">
                    <p class="text-center text-sm text-indigo-200 md:text-left">
                        ¿Ya tienes una cuenta?
                        <a href="/auth/login"
                            class="login-underline text-cyan-400 hover:text-cyan-200 focus:outline-none focus:ring-2 focus:ring-cyan-500 rounded transition font-semibold">
                            Inicia sesión
                        </a>
                    </p>
                    <button type="button" id="nextStep"
                        class="btn-animated text-white font-bold py-2 px-8 rounded-xl shadow-lg transition-all duration-300 text-base tracking-wide focus:outline-none focus:ring-4 focus:ring-cyan-300 flex items-center gap-2 md:ml-auto">
                        Siguiente
                        <i class="bi bi-arrow-right-circle text-white text-lg"></i>
                    </button>
                </div>
            </div>
            <!-- Paso 2 -->
            <div id="step2" class="hidden-step">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Usuario y Correo en la misma fila -->
                    <div>
                        <label for="username" class="block text-indigo-200 font-semibold mb-1">Nombre de Usuario (opcional)</label>
                        <div class="relative">
                            <span class="input-icon">
                                <i class="bi bi-person-fill"></i>
                            </span>
                            <input type="text" id="username" name="username"
                                class="pl-icon w-full px-4 py-2 rounded-lg border border-indigo-700 bg-indigo-800 text-white shadow-inner focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition input-animated" />
                        </div>
                    </div>
                    <div>
                        <label for="email" class="block text-indigo-200 font-semibold mb-1">Correo Electrónico</label>
                        <div class="relative">
                            <span class="input-icon">
                                <i class="bi bi-envelope-fill"></i>
                            </span>
                            <input type="email" id="email" name="email" required
                                class="pl-icon w-full px-4 py-2 rounded-lg border border-indigo-700 bg-indigo-800 text-white shadow-inner focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition input-animated" />
                        </div>
                    </div>
                    <!-- Contraseña y Confirmar contraseña en la fila siguiente -->
                    <div>
                        <label for="password" class="block text-indigo-200 font-semibold mb-1">Contraseña</label>
                        <div class="relative">
                            <span class="input-icon">
                                <i class="bi bi-lock-fill"></i>
                            </span>
                            <input type="password" id="password" name="password" required
                                class="pl-icon pr-10 w-full px-4 py-2 rounded-lg border border-indigo-700 bg-indigo-800 text-white shadow-inner focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition input-animated" />
                            <button type="button" id="togglePassword" aria-label="Mostrar u ocultar contraseña"
                                class="absolute right-3 top-1/2 -translate-y-1/2 flex items-center bg-transparent border-0 p-0 m-0 focus:outline-none">
                                <i class="bi bi-eye-slash h-5 w-5 text-indigo-400 hover:text-indigo-200 transition"></i>
                            </button>
                        </div>
                    </div>
                    <div>
                        <label for="confirm_password" class="block text-indigo-200 font-semibold mb-1">Confirmar Contraseña</label>
                        <div class="relative">
                            <span class="input-icon">
                                <i class="bi bi-lock-fill"></i>
                            </span>
                            <input type="password" id="confirm_password" name="confirm_password" required
                                class="pl-icon pr-10 w-full px-4 py-2 rounded-lg border border-indigo-700 bg-indigo-800 text-white shadow-inner focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition input-animated" />
                            <button type="button" id="toggleConfirmPassword" aria-label="Mostrar u ocultar confirmar contraseña"
                                class="absolute right-3 top-1/2 -translate-y-1/2 flex items-center bg-transparent border-0 p-0 m-0 focus:outline-none">
                                <i class="bi bi-eye-slash h-5 w-5 text-indigo-400 hover:text-indigo-200 transition"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="flex flex-col md:flex-row md:justify-between md:items-center mt-6 gap-4">
                    <p class="text-center text-sm text-indigo-200 md:text-left">
                        ¿Ya tienes una cuenta?
                        <a href="/auth/login"
                            class="login-underline text-cyan-400 hover:text-cyan-200 focus:outline-none focus:ring-2 focus:ring-cyan-500 rounded transition font-semibold">
                            Inicia sesión
                        </a>
                    </p>
                    <div class="flex gap-2 md:ml-auto">
                        <button type="button" id="prevStep"
                            class="btn-animated text-white font-bold py-2 px-8 rounded-xl shadow-lg transition-all duration-300 text-base tracking-wide focus:outline-none focus:ring-4 focus:ring-cyan-300 flex items-center gap-2">
                            <i class="bi bi-arrow-left-circle text-white text-lg"></i>
                            Anterior
                        </button>
                        <button type="submit"
                            class="btn-animated text-white font-bold py-2 px-8 rounded-xl shadow-lg transition-all duration-300 text-base tracking-wide focus:outline-none focus:ring-4 focus:ring-cyan-300 flex items-center gap-2">
                            <i class="bi bi-check-circle-fill text-white text-lg"></i>
                            Registrarse
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<%- include('../template/main/footer', { jsStyle: ['js/auth/register.js'] }) %>